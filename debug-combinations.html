<!DOCTYPE html>
<html>
<head>
    <title>Debug Combinations</title>
    <script src="elements/data/loader.js"></script>
</head>
<body>
    <h1>Element Combinations Debug</h1>
    <div id="status">Loading...</div>
    <div id="results"></div>
    
    <script>
        async function debugCombinations() {
            const status = document.getElementById('status');
            const results = document.getElementById('results');
            
            // Wait for elements to load
            if (!window.elementLoader || !window.elementLoader.isLoaded || !window.elementLoader.isLoaded()) {
                await new Promise((resolve) => {
                    window.addEventListener('elementsLoaded', resolve, { once: true });
                });
            }
            
            status.textContent = `Loaded ${window.elementLoader.elements.size} elements and ${Object.keys(window.elementLoader.combinations).length} combinations`;
            
            // Test specific combinations
            const testCombos = [
                [0, 1], // Earth + Water
                [0, 2], // Earth + Air
                [0, 3], // Earth + Fire
                [1, 2], // Water + Air
                [1, 3], // Water + Fire
                [2, 3]  // Air + Fire
            ];
            
            let html = '<h2>Base Element Combinations:</h2><ul>';
            
            for (const [id1, id2] of testCombos) {
                const key = `${Math.min(id1, id2)}+${Math.max(id1, id2)}`;
                const result = window.elementLoader.combinations[key];
                const elem1 = window.elementLoader.elements.get(id1);
                const elem2 = window.elementLoader.elements.get(id2);
                const elemResult = result !== undefined ? window.elementLoader.elements.get(result) : null;
                
                html += `<li>${elem1?.n || id1} + ${elem2?.n || id2} = ${elemResult?.n || 'No combination'} (${key} â†’ ${result})</li>`;
            }
            
            html += '</ul>';
            
            // Show all combinations
            html += `<h2>All Combinations (first 20):</h2><ul>`;
            const allCombos = Object.entries(window.elementLoader.combinations).slice(0, 20);
            for (const [key, resultId] of allCombos) {
                const [id1, id2] = key.split('+').map(Number);
                const elem1 = window.elementLoader.elements.get(id1);
                const elem2 = window.elementLoader.elements.get(id2);
                const elemResult = window.elementLoader.elements.get(resultId);
                
                html += `<li>${elem1?.n || id1} + ${elem2?.n || id2} = ${elemResult?.n || resultId}</li>`;
            }
            html += '</ul>';
            
            results.innerHTML = html;
        }
        
        debugCombinations();
    </script>
</body>
</html>